<!doctype html>
<html>
    <head>
        <title>Binvox loader</title>
        <link rel="stylesheet" href="css/common.css" />
        <script src="../build/Voxel.js"></script>
        <script src="js/Three.js"></script>
        <script src="js/common.js"></script>
    </head>
    <body>
    </body>
    <script>
		create( function ( scene, camera ) {

			camera.position.set( 200, 400, 400 );
			camera.updateMatrix( );
			camera.lookAt( new THREE.Vector3( 0, 0, 0 ) );

            var manager = new VOXEL.ThreeManager( );
            var voxelEngine = new VOXEL.VoxelEngine( manager );

            VOXEL.BinvoxLoader( 'assets/goblin.binvox', function ( model ) {

                var resource = voxelEngine.prepare( model );

                voxelEngine.apply( resource, model.size * -0.5, 0, 0, 0xff0000 );
                voxelEngine.apply( resource, model.size *  0.0, 0, 0, 0x00ff00 );
                voxelEngine.apply( resource, model.size * +0.5, 0, 0, 0x0000ff );

                voxelEngine.release( resource );

				voxelEngine.commit( );

            } );

            scene.add( manager.object3D );

        } );
    </script>
</html>
